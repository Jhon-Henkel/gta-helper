import{_ as P}from"./GtaHelperPage.vue_vue_type_script_setup_true_lang-D9zwqVDj.js";import{_ as A}from"./GtaHelperHeader.vue_vue_type_script_setup_true_lang-D5o-LmVY.js";import{_ as O}from"./GtaHelperCard.vue_vue_type_script_setup_true_lang-C67ulFe9.js";import{d as F,p as b,q as U,o as f,g as C,a as l,w as t,u as a,I as y,r as V,s as p,b as i,t as d,v,i as x,l as k,F as _,h as D,c as S,x as G,j as L,y as B,e as j,z as N,A as H,m as z,n as J}from"./index-CoSuzWu0.js";import{_ as T}from"./_plugin-vue_export-helper-DX78vqoQ.js";const Y={class:"ion-padding",slot:"content"},K=F({__name:"GtaHelperCollectiblePartView",props:{part:{type:String,required:!0},imageFileName:{type:String,required:!0},service:{type:Object,required:!0},onlyUnchecked:{type:Boolean,required:!1,default:!1},showNumber:{type:Boolean,required:!1,default:!0},showItemsCount:{type:Boolean,required:!1,default:!0}},emits:["update"],setup(e,{emit:n}){const o=e,h=n,s=b(0),r=b(o.service.getItemsPart(o.part));function q(g){r.value.forEach(c=>{c.number===g.number&&(c.collected=!c.collected)}),m()}function I(g){r.value.forEach(c=>{c.collected=g}),m()}function m(){o.service.updateItemsPart(o.part,r.value),w(),h("update",r.value)}function w(){s.value=0,r.value.forEach(g=>{g.collected&&s.value++})}return U(()=>{w()}),(g,c)=>(f(),C(_,null,[l(a(x),{slot:"header",color:"light"},{default:t(()=>[l(a(y),{slot:"start"},{default:t(()=>[V(g.$slots,"default",{},void 0,!0)]),_:3}),p(l(a(y),null,{default:t(()=>[i(d(s.value)+"/"+d(r.value.length),1)]),_:1},512),[[v,e.showItemsCount]])]),_:3}),k("div",Y,[(f(!0),C(_,null,D(r.value,(u,E)=>(f(),S(a(j),{key:E},{default:t(()=>[p(l(a(x),null,{default:t(()=>{var $;return[l(a(G),{slot:"start",checked:u.collected,onIonChange:Z=>q(u)},null,8,["checked","onIonChange"]),p(l(a(L),{src:($=u.imageFileName)!=null?$:"",class:"item-image"},null,8,["src"]),[[v,u.imageFileName]]),l(a(y),null,{default:t(()=>[e.showNumber?(f(),S(a(y),{key:0},{default:t(()=>[i(d(u.number)+" ",1),p(l(a(B),null,{default:t(()=>[i(" - "+d(u.description),1)]),_:2},1536),[[v,u.description.length>0]])]),_:2},1024)):(f(),S(a(y),{key:1},{default:t(()=>[p(l(a(B),null,{default:t(()=>[i(d(u.description),1)]),_:2},1536),[[v,u.description.length>0]])]),_:2},1024))]),_:2},1024)]}),_:2},1536),[[v,!e.onlyUnchecked||e.onlyUnchecked&&!u.collected]])]),_:2},1024))),128)),p(l(a(N),{color:"primary",expand:"block",fill:"outline",class:"ion-padding-top",onClick:c[0]||(c[0]=u=>I(!0))},{default:t(()=>[i(" Marcar todos ")]),_:1},512),[[v,s.value<r.value.length]]),p(l(a(N),{color:"danger",expand:"block",fill:"outline",class:H(s.value<r.value.length?"":"ion-padding-top"),onClick:c[1]||(c[1]=u=>I(!1))},{default:t(()=>[i(" Desmarcar todos ")]),_:1},8,["class"]),[[v,s.value>0]])])],64))}}),Q=T(K,[["__scopeId","data-v-e749a76b"]]),R=["src"],W={class:"ion-text-end"},oe=F({__name:"GtaHelperCollectiblePage",props:{totalItems:{type:Number,required:!0},baseDirectory:{type:String,required:!0},service:{type:Object,required:!0},items:{type:Array,required:!0},headerTitle:{type:String,required:!0},showNumber:{type:Boolean,required:!1,default:!0},mapImageFileName:{type:String,required:!0},showItemsCount:{type:Boolean,required:!1,default:!0},itemEnum:{type:String,required:!0}},setup(e){const n=e,o=b(),h=b(),s=b(!0);function r(){o.value=n.service.getSumOfCollectedItems(n.itemEnum),h.value=parseInt(String(o.value/n.totalItems*100))}return U(()=>{r()}),(q,I)=>(f(),S(P,null,{header:t(()=>[l(A,{title:e.headerTitle},null,8,["title"])]),content:t(()=>[l(O,null,{title:t(()=>[i(" Coletado ")]),subtitle:t(()=>[i(d(o.value)+"/"+d(e.totalItems)+" ("+d(h.value)+"%) ",1)]),_:1}),k("iframe",{src:e.mapImageFileName,width:"100%",height:"300px",allowfullscreen:""},null,8,R),k("div",W,[l(a(N),{fill:"clear",onClick:I[0]||(I[0]=m=>s.value=!s.value)},{default:t(()=>[i(d(s.value?"Todos":"Somente NÃ£o Coletados"),1)]),_:1})]),l(a(z),null,{default:t(()=>[(f(!0),C(_,null,D(e.items,(m,w)=>(f(),S(a(J),{key:w,value:m.accordion},{default:t(()=>[l(Q,{"image-file-name":"".concat(e.baseDirectory).concat(m.imageFileName),part:m.part,service:e.service,onlyUnchecked:s.value,"show-number":e.showNumber,"show-items-count":e.showItemsCount,onUpdate:r},{default:t(()=>[i(d(m.title),1)]),_:2},1032,["image-file-name","part","service","onlyUnchecked","show-number","show-items-count"])]),_:2},1032,["value"]))),128))]),_:1})]),_:1}))}}),X=31536e6,ne={getStorageItem:function(e){const n=localStorage.getItem(e);if(n){const o=JSON.parse(n);if(new Date().getTime()<o.expiry)return o.value;this.removeStorageItems(e)}return null},setStorageItem:function(e,n,o=null){const h=o!=null?o:X;localStorage.setItem(e,JSON.stringify({value:n,expiry:new Date().getTime()+h}))},removeStorageItems:function(...e){e.forEach(n=>{localStorage.removeItem(n)})}};export{oe as _,ne as u};
